<!-- This template is for viewign the landlord's entire estate records -->
{% extends "base.html" %}
{% load static  %}

{% block title %}
 Vesta Realty | Dashboard 
{% endblock title %}

{% block content %}

    <div class="p-4">

        <div class="grid grid-cols-1 md:grid-cols-2">

            <!-- My Tenants -->
            <div class="container col-span-1 mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <h2 class="text-2xl font-bold mb-4">My Tenants</h2>
                <div class="overflow-x-auto text-sm">
                    <table id="example" class="table-auto w-full stripe order-column row-border display">
                        <thead>
                            <tr>
                                <td class="p-2">No</td>
                                <th class="p-2">Name</th>
                                <th class="p-2">Property</th>
                                <th class="p-2">Balances</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for tenant in tenants %}
                                <tr>
                                    <td class="border p-2">{{forloop.counter}}</td>
                                    <td class="border p-2 font-semibold">{{tenant.name}}</td>
                                    <td class="border p-2">{{tenant.property}}</td>
                                    <td class="border p-2 text-xs font-semibold">Ksh: {{tenant.balance}}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>


            <!-- Properties -->
            <div class="col-span-1">
                <div class="container col-span-1 mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <div class="flex flex-col md:flex-row justify-between mb-3">
                        <h2 class="text-sm md:text-2xl font-bold mb-4">My Properties</h2>
                        <span class="font-bold text-sm">Total Bal:  Ksh: {{total}} </span>
                    </div>
                    <div class="overflow-x-auto text-sm">
                        <table id="example_2" class="table-auto w-full stripe order-column row-border display text-xs">
                            <thead>
                                <tr>
                                    <th class="p-2">No</th>
                                    <th class="p-2">Name</th>
                                    <th class="p-2">Location</th>
                                    <th class="p-2">No of tenants</th>
                                    <th class="p-2">Balances</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for property in properties %}
                                    <tr>
                                        <td class="border p-2">{{forloop.counter}}</td>
                                        <td class="border p-2 font-semibold">{{property.name}}</td>
                                        <td class="border p-2">{{property.location}}</td>
                                        <td class="border p-2">{{property.tenants}}</td>
                                        <td class="border p-2 font-semibold">Ksh: {{property.balances}}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Pyment records -->
            <div class="container col-span-1 mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <h2 class="text-2xl font-bold mb-4">Payment records</h2>
                <div class="overflow-x-auto text-sm">
                    <table id="example_3" class="table-auto w-full stripe order-column row-border display">
                        <thead>
                            <tr>
                                <td class="p-2">No</td>
                                <th class="p-2">Tenant</th>
                                <th class="p-2">Month</th>
                                <th class="p-2">Mpesa</th>
                                <th class="p-2">Rent</th>
                                <th class="p-2">Water</th>
                                <th class="p-2">Electricity</th>
                                <th class="p-2">Balance</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for payment in payments %}
                                <tr>
                                    <td class="border p-2">{{forloop.counter}}</td>
                                    <td class="border p-2 font-semibold">{{payment.tenant.name}}</td>
                                    <td class="border p-2 text-xs font-semibold">{{payment.month}} </td>
                                    <td class="border p-2">{{payment.mpesa_code}}</td>
                                    <td class="border p-2">Ksh{{payment.rent}}</td>
                                    <td class="border p-2">Ksh{{payment.water_bills}}</td>
                                    <td class="border p-2">Ksh{{payment.electricity_bills}}</td>
                                    <td class="border p-2 text-xs font-semibold tracking-wide">Ksh: {{payment.balance_carried_down}}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
        
    </div>

    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.tailwindcss.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    
    <script>
        $(document).ready(function() {
            $('#example').DataTable({
                // Add any customization options here
            });
            $('#example_2').DataTable({
                // Add any customization options here
            });
            $('#example_3').DataTable({
                // Add any customization options here
            });
        });
    </script>

{% endblock content %}